<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='food-map/css/style.css') }}">

    <link href="/static/external/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/external/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <link href="/static/external/css/navbar-static-top.css" rel="stylesheet">
    <title>음식 지도</title>
    <!--[if lt IE 9]>
    <script src="/static/external/js/ie8-responsive-file-warning.js"></script>
    <![endif]-->
    <script src="/static/external/js/ie-emulation-modes-warning.js"></script>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId={{ map_client_id }}&callback=initMap"></script>
</head>
<body>
<div id="wrapper">
    <nav class="navbar navbar-default navbar-static-top margin-bottom-0">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">신사옥 음식 지도</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">카테고리<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>





    <div id="map" style="position: absolute;height: 100%;width: 100%;"></div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="/static/external/js/bootstrap.min.js"></script>
<script src="/static/external/js/ie10-viewport-bug-workaround.js"></script>

<script>
var map = null;

function initMap() {
    var mapOptions = {
        center: new naver.maps.LatLng(37.5157873, 127.0991124),
        minZoom: 10,
        zoomControl: true,
        maxBounds: new naver.maps.LatLngBounds(new naver.maps.LatLng(37.491717, 127.039901), new naver.maps.LatLng(37.553497, 127.172326)),
        zoom: 12
    };
    map = new naver.maps.Map('map', mapOptions);

    var companyMarkerOptions = {
        position: new naver.maps.LatLng(37.5157873, 127.0991124),
        map: map
    };
    new naver.maps.Marker(companyMarkerOptions);

    {% for restaurant in restaurants %}
    {
        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng({{ restaurant.location[1] }}, {{ restaurant.location[0] }}),
            map: map,
            title: '{{ restaurant.name }}',
            animation: naver.maps.Animation.DROP
        });
        naver.maps.Event.addListener(marker, 'click', function() {
            map.panTo(new naver.maps.LatLng({{ restaurant.location[1] }}, {{ restaurant.location[0] }}));
        });
    }
    {% endfor %}
}

</script>
<!--<script type="text/javascript" src="/static/js/map.js"></script>-->
</body>
</html>